---
import clsx from "clsx";
import { Button, Input } from "uc-theme/components";

interface Props {
  direction: "vertical" | "horizontal";
}

const { direction } = Astro.props;
---

<subscribe-form>
  <form class={clsx("flex gap-4", { "flex-col": direction === "vertical" })}>
    <Input
      type="text"
      placeholder="Enter your email"
      type="email"
      name="email"
      isFullWidth={direction === "vertical"}
      className={clsx({
        "flex-1": direction === "horizontal",
      })}
    />
    <Button
      type="submit"
      isFullWidth={direction === "vertical"}
      className={clsx({
        "flex-0 min-w-[150px]": direction === "horizontal",
      })}>Submit</Button
    >
  </form>
</subscribe-form>

<script>
  class SubscribeForm extends HTMLElement {
    connectedCallback() {
      const form = this.querySelector("form");
      const input = this.querySelector("input");

      form?.addEventListener("submit", (e) => {
        e.preventDefault();

        alert(`You submitted: ${input?.value}`);
      });
    }
  }
  customElements.define("subscribe-form", SubscribeForm);
</script>
